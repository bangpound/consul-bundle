parameters:
    consul.host: http://127.0.0.1:8500

services:
    _defaults:
        autowire: true

    SensioLabs\Consul\Client:
        public: false
        arguments:
            - []
            - '@logger'
            - '@consul.guzzle.client'
        tags:
            - { name: monolog.logger, channel: consul }
    SensioLabs\Consul\ClientInterface: '@SensioLabs\Consul\Client'

    SensioLabs\Consul\Services\Agent: ~
    SensioLabs\Consul\Services\AgentInterface: '@SensioLabs\Consul\Services\Agent'

    SensioLabs\Consul\Services\Catalog: ~
    SensioLabs\Consul\Services\CatalogInterface: '@SensioLabs\Consul\Services\Catalog'

    SensioLabs\Consul\Services\Health: ~
    SensioLabs\Consul\Services\HealthInterface: '@SensioLabs\Consul\Services\Health'

    SensioLabs\Consul\Services\KV: ~
    SensioLabs\Consul\Services\KVInterface: '@SensioLabs\Consul\Services\KV'

    SensioLabs\Consul\Services\Session: ~
    SensioLabs\Consul\Services\SessionInterface: '@SensioLabs\Consul\Services\Session'

    ConsulBundle\Service\Event: ~
    ConsulBundle\Service\EventInterface: '@ConsulBundle\Service\Event'

    consul.guzzle.client:
        public: false
        class: GuzzleHttp\Client
        arguments:
            -
                base_uri: http://127.0.0.1:8500
                http_errors: false

    ConsulBundle\Controller\ProxyController: ~

    ConsulBundle\EventListener\ConsulListener:
        tags:
            - { name: kernel.event_listener, event: kernel.view, method: onKernelView }
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }
